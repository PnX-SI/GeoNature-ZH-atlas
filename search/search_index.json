{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"GeoNature Zone Humide Atlas","text":"<p>Bienvenue sur la documentation du projet GeoNature Zone Humide Atlas</p> <p>Documentation: https://pnx-si.github.io/GeoNature-ZH-atlas/</p> <p>Code source: https://github.com/PnX-SI/GeoNature-ZH-atlas/</p>"},{"location":"#introduction","title":"Introduction","text":"<p>L'atlas Zones Humides a pour vocation de partager aux \u00e9lus, aux acteurs travaillant sur des th\u00e9matiques li\u00e9es aux zones humides, ainsi qu'au grand public des informations sur la gestion des zones humides d'un territoire. Ces donn\u00e9es proviennent de l'application m\u00e9tier GeoNature et plus particuli\u00e8rement son module Zones Humides qui en permet la saisie.</p> <p>Cette suite d'outils permettant la gestion des zones humides d'un territoire a \u00e9t\u00e9 financ\u00e9e par la DREAL PACA, l'Agence de l'eau, la r\u00e9gion Sud et le CEN PACA, command\u00e9e par le Parc naturel r\u00e9gional du Luberon, et d\u00e9velopp\u00e9e par Natural Solutions.</p>"},{"location":"#partenaires","title":"Partenaires","text":""},{"location":"configuration/","title":"Configuration","text":""},{"location":"configuration/#structure-du-projet","title":"Structure du projet","text":"<p>La configuration se trouve dans le dossier <code>./data/config.yml</code> et est \u00e9crite au format YAML.</p> <pre><code>.\n\u251c\u2500\u2500 data\n\u2502   \u2514\u2500\u2500 config.yml\n\u251c\u2500\u2500 ...\n</code></pre>"},{"location":"configuration/#les-fichiers-statiques","title":"Les fichiers statiques","text":"<p>Les fichiers statiques, comme les images, se trouvent dans un dossier nomm\u00e9 <code>public</code> dans le r\u00e9pertoire racine. Les fichiers contenus dans public peuvent ensuite \u00eatre r\u00e9f\u00e9renc\u00e9s par votre configuration \u00e0 partir de l'URL de base <code>/</code>.</p> <pre><code>.\n\u251c\u2500\u2500 ...\n\u251c\u2500\u2500 public\n\u2502   \u251c\u2500\u2500 favicon.ico\n\u2502   \u251c\u2500\u2500 geonature.geojson\n\u2502   \u2514\u2500\u2500 images\n\u2502       \u251c\u2500\u2500 hero.png\n\u2502       \u251c\u2500\u2500 zh.jpg\n\u2502       \u251c\u2500\u2500 zh2.jpg\n\u2502       \u2514\u2500\u2500 zh3.jpg\n\u2502       \u251c\u2500\u2500 ...\n\u251c\u2500\u2500 ...\n</code></pre> <p>Par exemple, si vous ajoutez une image dans <code>public/image.png</code>, la configuration suivante acc\u00e9dera \u00e0 l'image :</p> <pre><code>---\npages:\n  home:\n    images:\n      - src: /image.png\n---\n</code></pre>"},{"location":"configuration/#fichier-du-configuration","title":"Fichier du configuration","text":"<p>La configuration de l'application est divis\u00e9e en deux sections principales : nous avons d'une part la configuration g\u00e9n\u00e9rale du template (layout), et d'autre part la configuration de la page d'accueil (pages.home).</p>"},{"location":"configuration/#configuration-generale-du-template","title":"Configuration g\u00e9n\u00e9rale du template","text":"<p>Toutes les pages de l'application partagent des \u00e9l\u00e9ments communs, tels que l'en-t\u00eate et le pied de page. Les param\u00e8tres suivants sont disponibles pour l'adapter \u00e0 vos besoins :</p>"},{"location":"configuration/#header","title":"Header","text":"<p>Dans l'en-t\u00eate, nous pouvons configurer :</p>"},{"location":"configuration/#logo","title":"Logo","text":"Propri\u00e9t\u00e9 Description alt Contient une description textuelle de l'image, qui n'est pas obligatoire mais qui est tr\u00e8s utile pour l'accessibilit\u00e9 src Est obligatoire et contient le chemin de l'image qu'on souhaite afficher. <pre><code>---\nlayout:\n  header:\n    logo:\n      alt: 'logo'\n      src: /images/partenaires/logo_sit.svg\n---\n</code></pre>"},{"location":"configuration/#footer","title":"Footer","text":"<p>Dans le pied de page, nous pouvons configurer :</p>"},{"location":"configuration/#creator","title":"Creator","text":"<p>Texte indiquant le propri\u00e9taire ou l'administrateur du site</p> <pre><code>---\nlayout:\n  footer:\n    creator: SIT zones humides\n---\n</code></pre>"},{"location":"configuration/#hero","title":"hero","text":"<p>Image en en-t\u00eate du pied de page</p> <pre><code>---\nlayout:\n  footer:\n    hero: 'hero.svg'\n---\n</code></pre>"},{"location":"configuration/#legal","title":"Legal","text":"<pre><code>---\nlayout:\n  footer:\n    legal:\n      - Financ\u00e9 par l\u2019Etat, l\u2019Agence de l\u2019eau Rh\u00f4ne M\u00e9diterran\u00e9e Corse, la R\u00e9gion Provence-Alpes-C\u00f4te d\u2019Azur et les Parcs naturels r\u00e9gionaux de Camargue, du Luberon, du Queyras, du Verdon et de la Sainte Baume.\n      - R\u00e9alis\u00e9 en partenariat technique avec le Parc National des Ecrins et le Conservatoire des Espaces Naturels\n---\n</code></pre>"},{"location":"configuration/#links","title":"Links","text":"<p>Il est possible d'ajouter des liens d'int\u00e9r\u00eat vers d'autres sites.</p> Propri\u00e9t\u00e9 Description title Contient une description textuelle de l'image, qui n'est pas obligatoire mais qui est tr\u00e8s utile pour l'accessibilit\u00e9 href L'URL vers laquelle pointe l'hyperlien <pre><code>---\nlayout:\n  links:\n    - title: GeoNature\n      href: https://geonature.fr\n    - title: GeoNature Citizen\n      href: https://www.natural-solutions.eu/blog/geonature-citizen\n---\n</code></pre>"},{"location":"configuration/#images","title":"Images","text":"<p>Images des partenaires</p> Propri\u00e9t\u00e9 Description alt Contient une description textuelle de l'image, qui n'est pas obligatoire mais qui est tr\u00e8s utile pour l'accessibilit\u00e9 src Est obligatoire et contient le chemin de l'image qu'on souhaite afficher. <pre><code>---\nlayout:\n  header:\n    images:\n      - src: '/images/partenaires/dreal_paca.svg'\n        alt: 'DREAL PACA'\n      - src: '/images/partenaires/logo_sit.svg'\n        alt: 'SIT'\n      - src: '/images/partenaires/region_sud.svg'\n        alt: 'Region Sud'\n---\n</code></pre>"},{"location":"configuration/#configuration-de-la-page-daccueil","title":"Configuration de la page d'accueil","text":""},{"location":"configuration/#title","title":"Title","text":"<p>Titre de la page d'accueil</p> <pre><code>---\npages:\n  home:\n    title: Bienvenue sur l'atlas des zones humides de Provence-Alpes-C\u00f4te d\u2019Azur\n---\n</code></pre>"},{"location":"configuration/#text","title":"Text","text":"<p>Description de la page d'accueil</p> <pre><code>---\npages:\n  home:\n    text:\n      - Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque sed porta est, et fermentum ipsum. Pellentesque dictum augue sit amet neque ultricies condimentum. Etiam fringilla est aliquam lacus interdum, et commodo purus dapibus. Sed in fringilla orci, in egestas felis. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Duis sit amet aliquam dolor, sit amet tincidunt ipsum. Aliquam eget nunc dui. Nullam eget feugiat metus, et volutpat odio. Donec et libero vitae nisl pellentesque consequat. Morbi a mauris massa. Maecenas lobortis vehicula massa, a posuere libero imperdiet et. Integer vitae turpis ultrices, tincidunt neque at, aliquet augue. Nam non enim malesuada, pharetra nibh ut, maximus odio.\n      - Morbi id metus mattis, condimentum est eu, tincidunt ante. Sed placerat vestibulum velit, vel imperdiet risus tempor vitae. Donec sit amet metus eros. Maecenas diam urna, venenatis vitae purus sit amet, dapibus tristique est. In tincidunt augue eget pharetra pulvinar. Etiam consectetur ligula ac gravida aliquam. Vivamus enim massa, tincidunt at justo id, iaculis commodo purus.\n---\n</code></pre>"},{"location":"configuration/#images_1","title":"Images","text":"<p>Images de la page d'accueil</p> Propri\u00e9t\u00e9 Description alt Contient une description textuelle de l'image, qui n'est pas obligatoire mais qui est tr\u00e8s utile pour l'accessibilit\u00e9 src Est obligatoire et contient le chemin de l'image qu'on souhaite afficher. <pre><code>---\npages:\n  home:\n    images:\n      - src: /images/zh.jpg\n        alt: zone humide 1\n      - src: /images/zh2.jpg\n        alt: zone humide 2\n      - src: /images/zh3.jpg\n        alt: zone humide 3\n---\n</code></pre>"},{"location":"configuration/#dependances","title":"D\u00e9pendances","text":""},{"location":"configuration/#api-url","title":"API URL","text":"<p>URL de l'API du module GeoNature sur les zones humides permettant  notamment d'obtenir les photos de chaque zone humide</p> <pre><code>---\ndependencies:\n  apiurl: http://localhost:8000/zones_humides/\n---\n</code></pre>"},{"location":"configuration/#pbf","title":"PBF","text":"<p>URL de la route API du module GeoNature sur les zones humides renvoyant le  fichier PBF. contenant les  g\u00e9om\u00e9tries et informations des zones humides.</p> <pre><code>---\ndependencies:\n  pbf: http://localhost:8000/zones_humides/pbf/complete\n---\n</code></pre>"},{"location":"configuration/#pdf","title":"PDF","text":"<p>URL de la route API du module GeoNature Zone Humides renvoyant le fichier PDF de chaque zone humide.</p> <pre><code>---\ndependencies:\n  pdf: http://localhost:8000/zones_humides/export_pdf\n---\n</code></pre> <p>Il est \u00e0 noter que l'URL de l'API est r\u00e9p\u00e9t\u00e9 pour ces d\u00e9pendences, ce  choix a \u00e9t\u00e9 fait afin d'\u00eatre plus flexible dans la localisation des  donn\u00e9es.</p>"},{"location":"configuration/#configuration-de-la-carte","title":"Configuration de la carte","text":"<p>Il est possible de configurer les couches cartographiques disponibles aux utilisateurs via la configuration suivante :</p> <pre><code>---\nmap:\n  layers:\n    - checked: true\n      url: https://wxs.ign.fr/decouverte/geoportail/wmts?LAYER=ORTHOIMAGERY.ORTHOPHOTOS&amp;EXCEPTIONS=text/xml&amp;FORMAT=image/jpeg&amp;SERVICE=WMTS&amp;VERSION=1.0.0&amp;REQUEST=GetTile&amp;STYLE=normal&amp;TILEMATRIXSET=PM&amp;TILEMATRIX={z}&amp;TILEROW={y}&amp;TILECOL={x}\n      name: ORTHO\n      attribution: IGN\n    - checked: false\n      url: https://a.tile.opentopomap.org/{z}/{x}/{y}.png\n      name: OpenTopoMap\n      attribution: &gt; \n        Map data: \u00a9 &lt;a href='https://www.openstreetmap.org/copyright' target='_blank'&gt;OpenStreetMap contributors&lt;/a&gt;, SRTM | Map style: \u00a9 &lt;a href='https://opentopomap.org' target='_blank'&gt;OpenTopoMap&lt;/a&gt; (&lt;a href='https://creativecommons.org/licenses/by-sa/3.0/' target='_blank'&gt;CC-BY-SA&lt;/a&gt;)\n      options: {maxNativeZoom: 17}\n      subdomains: []\n---\n</code></pre> <ul> <li><code>checked</code> permet de d\u00e9finir la couche par d\u00e9faut</li> <li><code>url</code> l'url de la couche</li> <li><code>name</code> le nom affich\u00e9 \u00e0 l'utilisateur</li> <li><code>attribution</code> permet de d\u00e9terminer les cr\u00e9ateurs de la donn\u00e9es, n'est pas   affich\u00e9 \u00e0 l'utilisateur</li> <li><code>options</code> permet de d\u00e9finir des options de couche. Notamment le <code>maxNativeZoom</code>   qui emp\u00eache l'affichage de tuiles \"grises\" car non disponibles</li> <li><code>subdomains</code> sous domaine du service de tuile</li> </ul>"},{"location":"configuration/#exemple-complet-de-configuration","title":"Exemple complet de configuration","text":"<pre><code>dependencies:\n  apiurl: http://localhost:8000/zones_humides/\n  pdf: http://localhost:8000/zones_humides/export_pdf\n  pbf: http://localhost:8000/zones_humides/pbf/complete\n\nmap:\n  layers:\n    - checked: true\n      url: https://wxs.ign.fr/decouverte/geoportail/wmts?LAYER=ORTHOIMAGERY.ORTHOPHOTOS&amp;EXCEPTIONS=text/xml&amp;FORMAT=image/jpeg&amp;SERVICE=WMTS&amp;VERSION=1.0.0&amp;REQUEST=GetTile&amp;STYLE=normal&amp;TILEMATRIXSET=PM&amp;TILEMATRIX={z}&amp;TILEROW={y}&amp;TILECOL={x}\n      name: ORTHO\n      attribution: IGN\n    - checked: false\n      url: https://a.tile.opentopomap.org/{z}/{x}/{y}.png\n      name: OpenTopoMap\n      attribution: &gt;\n        Map data: \u00a9 &lt;a href='https://www.openstreetmap.org/copyright' target='_blank'&gt;OpenStreetMap contributors&lt;/a&gt;, SRTM | Map style: \u00a9 &lt;a href='https://opentopomap.org' target='_blank'&gt;OpenTopoMap&lt;/a&gt; (&lt;a href='https://creativecommons.org/licenses/by-sa/3.0/' target='_blank'&gt;CC-BY-SA&lt;/a&gt;)\n      options: {maxNativeZoom: 17}\n      subdomains: []\n\npages:\n  home:\n    title: Bienvenue sur l'atlas des zones humides de Provence-Alpes-C\u00f4te d\u2019Azur\n    text:\n      - Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque sed porta est, et fermentum ipsum. Pellentesque dictum augue sit amet neque ultricies condimentum. Etiam fringilla est aliquam lacus interdum, et commodo purus dapibus. Sed in fringilla orci, in egestas felis. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Duis sit amet aliquam dolor, sit amet tincidunt ipsum. Aliquam eget nunc dui. Nullam eget feugiat metus, et volutpat odio. Donec et libero vitae nisl pellentesque consequat. Morbi a mauris massa. Maecenas lobortis vehicula massa, a posuere libero imperdiet et. Integer vitae turpis ultrices, tincidunt neque at, aliquet augue. Nam non enim malesuada, pharetra nibh ut, maximus odio.\n      - Morbi id metus mattis, condimentum est eu, tincidunt ante. Sed placerat vestibulum velit, vel imperdiet risus tempor vitae. Donec sit amet metus eros. Maecenas diam urna, venenatis vitae purus sit amet, dapibus tristique est. In tincidunt augue eget pharetra pulvinar. Etiam consectetur ligula ac gravida aliquam. Vivamus enim massa, tincidunt at justo id, iaculis commodo purus.\n    images:\n      - src: /images/zh.jpg\n        alt: zone humide 1\n      - src: /images/zh2.jpg\n        alt: zone humide 2\n      - src: /images/zh3.jpg\n        alt: zone humide 3\n\nlayout:\n  header:\n    logo:\n      alt: 'logo'\n      src: /images/partenaires/logo_sit.svg\n  footer:\n    creator: SIT zones humides\n    legal:\n      - Financ\u00e9 par l\u2019Etat, l\u2019Agence de l\u2019eau Rh\u00f4ne M\u00e9diterran\u00e9e Corse, la R\u00e9gion Provence-Alpes-C\u00f4te d\u2019Azur et les Parcs naturels r\u00e9gionaux de Camargue, du Luberon, du Queyras, du Verdon et de la Sainte Baume.\n      - R\u00e9alis\u00e9 en partenariat technique avec le Parc National des Ecrins et le Conservatoire des Espaces Naturels\n    hero: 'hero.svg'\n    images:\n      - src: '/images/partenaires/dreal_paca.svg'\n        alt: 'DREAL PACA'\n      - src: '/images/partenaires/logo_sit.svg'\n        alt: 'SIT'\n      - src: '/images/partenaires/region_sud.svg'\n        alt: 'Region Sud'\n    links:\n      - title: GeoNature\n        href: https://geonature.fr\n      - title: GeoNature Citizen\n        href: https://www.natural-solutions.eu/blog/geonature-citizen\n</code></pre>"},{"location":"installation/","title":"Installation","text":""},{"location":"installation/#installation","title":"Installation","text":"<pre><code>npm install\n\n---&gt; 100%\n</code></pre>"},{"location":"installation/#build","title":"Build","text":"<pre><code>npm run build\n\n---&gt; 100%\n\n&gt; atlas@1.0.0 build /geonature/atlas\n&gt; next build\n\ninfo  - Using webpack 5. Reason: Enabled by default https://nextjs.org/docs/messages/webpack5\ninfo  - Checking validity of types\ninfo  - Creating an optimized production build\ninfo  - Compiled successfully\ninfo  - Collecting page data\ninfo  - Generating static pages (4/4)\ninfo  - Finalizing page optimization\n\nPage                              Size     First Load JS\n\u250c \u25cb /                             4.22 kB         122 kB\n\u251c   /_app                         0 B            82.5 kB\n\u251c \u25cb /404                          194 B          82.7 kB\n\u251c \u25cb /map                          27.8 kB         141 kB\n\u2514 \u03bb /map/[slug]                   5.59 kB         129 kB\n+ First Load JS shared by all     82.5 kB\n  \u251c chunks/framework.1eefeb.js    42.6 kB\n  \u251c chunks/main.f881ac.js         23.6 kB\n  \u251c chunks/pages/_app.57d825.js   14.4 kB\n  \u251c chunks/webpack.7cb7ed.js      1.94 kB\n  \u2514 css/27d968ccce4b3fdeec32.css  277 B\n\n\u03bb  (Server)  server-side renders at runtime (uses getInitialProps or getServerSideProps)\n\u25cb  (Static)  automatically rendered as static HTML (uses no initial props)\n\u25cf  (SSG)     automatically generated as static HTML + JSON (uses getStaticProps)\n   (ISR)     incremental static regeneration (uses revalidate in getStaticProps)\n</code></pre>"},{"location":"installation/#lancer-le-projet","title":"Lancer le projet","text":"<pre><code>npm start\n\n---&gt; 100%\n\n&gt; atlas@1.0.0 start /geonature/atlas\n&gt; next start\n\nready - started server on 0.0.0.0:3000, url: http://localhost:3000\n</code></pre>"},{"location":"installation_docker/","title":"Installation avec Docker","text":""},{"location":"installation_docker/#build-dimage-docker","title":"Build d'image docker","text":"<pre><code>docker build -t geonature-zones-humides-atlas .\n\n---&gt; 100%\n</code></pre>"},{"location":"installation_docker/#executer-limage-docker","title":"Executer l'image docker","text":"<pre><code>docker run --rm -it -p 3000:3000 geonature-zones-humides-atlas npm run start_local\n\n---&gt; 100%\n</code></pre>"},{"location":"template/","title":"Template: G\u00e9n\u00e9ration du projet","text":"<p>Vous pouvez utiliser un template de projet pour commencer, car il comprend une grande partie de la configuration initiale.</p> <p>Gitlab: https://gitlab.com/natural-solutions/geonature/zones-humides/atlas-template</p> <p>Le template du projet aura toujours une configuration tr\u00e8s orient\u00e9e que vous devrez mettre \u00e0 jour et adapter \u00e0 vos propres besoins, mais il peut constituer un bon point de d\u00e9part pour votre projet.</p> <p>Si vous souhaitez utiliser le template comme point de d\u00e9part, veuillez suivre les \u00e9tapes suivantes :</p>"},{"location":"template/#prerequis","title":"Pr\u00e9requis","text":"<p>Pour pouvoir utiliser le template, vous devez avoir install\u00e9 Docker et Docker Compose sur votre syst\u00e8me.</p>"},{"location":"template/#telechargez-et-extrayez-le-dossier-contenant-tous-les-fichiers","title":"T\u00e9l\u00e9chargez et extrayez le dossier contenant tous les fichiers","text":"<pre><code>curl https://gitlab.com/natural-solutions/geonature/zones-humides/atlas-template/-/archive/master/atlas-template-master.tar.gz | tar -xz\ncd atlas-template-master\n</code></pre>"},{"location":"template/#modifier-la-configuration","title":"Modifier la configuration","text":"<p>Pour des informations sur la fa\u00e7on de configurer l'application, vous pouvez aller ici</p> <pre><code>vim ./data/config.yml\n</code></pre>"},{"location":"template/#initialiser-et-ajouter-le-depot-remote-cree-dans-gitlab","title":"Initialiser et ajouter le d\u00e9p\u00f4t remote cr\u00e9\u00e9 dans gitlab","text":"<pre><code>git init\ngit remote add origin [depot-remote]\ngit commit -m \"chore: initial commit\"\ngit push origin main\n</code></pre>"},{"location":"template/#demarrer-le-projet-avec-node","title":"D\u00e9marrer le projet avec <code>node</code>","text":"<pre><code>docker-compose up -d --build atlas\n</code></pre>"},{"location":"template/#ou-demarrer-le-projet-avec-nginx","title":"ou D\u00e9marrer le projet avec <code>nginx</code>","text":"<pre><code>docker-compose up -d --build atlas-nginx\n</code></pre>"}]}